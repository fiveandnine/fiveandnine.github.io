<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!--<![endif]-->

<head>
  <title>领域驱动 | SHAWN</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="SHAWN">
    <meta name="author" content="LEISHAWN">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="SHAWN" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
    
    <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
    

    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->

  
  
  

  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

<div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
    <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
        <img src="/img/close.png" alt="Close">
    </div>
    <!-- Lists in Slidebars -->
    <ul class="sb-menu">
        <li><a href="/" class="animsition-link" title="Home">Home</a></li>
        <li><a href="/archives" class="animsition-link" title="archive">archives</a>
        </li>
        <!-- Dropdown Menu -->
        
        
            <li>
                <a class="sb-toggle-submenu">Categories<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                        <li><a href="/categories/Dictionaries/" class="animsition-link">Dictionaries
                                <small>(2)</small>
                            </a></li>
                    
                        <li><a href="/categories/gloabal/" class="animsition-link">gloabal
                                <small>(1)</small>
                            </a></li>
                    
                </ul>
            </li>
        
        
            <li>
                <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                        <li><a href="https://xxxxxmiss.github.io/" class="animsition-link">xxxxxMiss</a></li>
                    
                </ul>
            </li>
        
    </ul>
    <!-- Lists in Slidebars -->
<!--    <ul class="sb-menu secondary">-->
<!--        -->
<!--        <li><a href="/about.html" class="animsition-link" title="about">About</a></li>-->
<!--        <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>-->
<!--    </ul>-->
</div>

<!-- ============================ END Off-canvas navigation =========================== -->

<!-- ============================ #sb-site Main Page Wrapper =========================== -->
<!-- ============================ Header & Logo bar =========================== -->

<div id="navigation" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <!-- Nav logo -->
            <div class="logo">
                <a href="/" title="Logo" class="animsition-link">
                     <img src="/img/logo.png" alt="Logo" width="35px;">
                    
                </a>
            </div>
            <!-- // Nav logo -->
            <!-- Info-bar -->
            <nav>
                <ul class="nav">
                    <li><a href="/" class="animsition-link">SHAWN</a></li>
                    <li class="nolink"><span>Always </span>Creative.</li>
                    
                        <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a>
                        </li>
                    
                    
                        <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a></li>
                    
                    
                        <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a></li>
                    
                    
                        <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a></li>
                    
                    
                        <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                    
                    <li class="nolink"><span>Welcome!</span></li>
                </ul>
            </nav>
            <!--// Info-bar -->
        </div>
        <!-- // .container -->
        <div class="learnmore sb-toggle-right">More</div>
        <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar before"></span>
            <span class="icon-bar main"></span>
            <span class="icon-bar after"></span>
        </button>
    </div>
    <!-- // .navbar-inner -->
</div>

<!-- ============================ Header & Logo bar =========================== -->

<div id="sb-site">
    <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->


</div>
      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2019-10-08T09:03:27.000Z" itemprop="datePublished">
          2019-10-08
      </time>
    
</span>
                <h1>领域驱动</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<p>将每一块业务划分成不同的领域，各领域下包含哪些服务，每个页面调用的并不是 API 接口，而是各自领域的服务。</p>
<p>DDD的主要步骤分两步：</p>
<ul>
<li>挖掘领域概念，建立领域模型</li>
<li>用代码实现领域模型</li>
</ul>
<h2 id="领域模型的特点"><a href="#领域模型的特点" class="headerlink" title="领域模型的特点"></a>领域模型的特点</h2><ul>
<li>领域的是有边界的，反映了领域内用户业务需求的本质</li>
<li>领域模型只反应业务，和语言无关；不仅能反应实体概念，还能反应过程概念 </li>
<li>软件业务逻辑集中在一个模型中，提高软件的可维护性，业务的可理解性和可重用性</li>
<li>能够快速响应需求变化</li>
</ul>
<h2 id="领域驱动的概念"><a href="#领域驱动的概念" class="headerlink" title="领域驱动的概念"></a>领域驱动的概念</h2><h3 id="实体-entity"><a href="#实体-entity" class="headerlink" title="实体 entity"></a>实体 entity</h3><p> “由一个它的标示定义的对象叫做实体”，通常具备唯一id<br> ，能够持久化，具有业务逻辑，对应现实世界的业务对象。</p>
<ul>
<li>一个实体的基本概念是一个持续抽象的生命，可变化不同的形态和情况，但是总是有相同的标示。</li>
<li>实体就是领域中需要唯一标识的领域概念</li>
<li><p>实体上不应该有太多的属性或者行为，应该发现其他的一些实体的属性和行为，转移到其他关联的实体或者值对象上</p>
<h3 id="值对象-value-object"><a href="#值对象-value-object" class="headerlink" title="值对象 value object"></a>值对象 value object</h3><p>描述事物的对象，更准确的说是一个没有概念上的标识符描述一个领域方面的对象。这些对象是用来表示临时的事物，或者可以认为值对象是实体的属性，这些属性没有特性标识但同时表达了领域中某类含义的概念。</p>
<ul>
<li><p>如果两个对象的所有的属性的值都相同，我们会认为它们是同一个对象的话，那么我们就可以把这种对象设计为值对象。值对象在判断是否是同一个对象时是通过它们的所有属性是否相同，如果相同则认为是同一个值对象；而实体是否为同一个实体的区分，只是看实体的唯一标识是否相同，而不管实体的属性是否相同。</p>
</li>
<li><p>关于实体与值对象的一个例子：比如员工信息的属性，如住址，电话号码都可以改变；然而，同一个员工的实体的标识将保持不变。因此，一个实体的基本概念是一个持续抽象的生命，可以变化不同的状态和情形，但总是有相同的标识。</p>
</li>
<li><p>值对象不可变，只读。如果值对象是可共享的，它们应该是不可变的。（值对象应该保持尽量的简单）。         </p>
</li>
<li>值对象的设计应尽量简单，不要让它引用很多其他的对象，因为本质上讲值对象只是代表一个值。<h3 id="聚合和聚合根"><a href="#聚合和聚合根" class="headerlink" title="聚合和聚合根"></a>聚合和聚合根</h3>聚合是用来定义领域对象所有权和边界的领域模式。聚合的作用是帮助简化模型对象间的关系。聚合，它通过定义对象之间清晰的所属关系和边界来实现领域模型的内聚，并避免了错综复杂的难以维护的对象关系网的形成。聚合定义了一组具有内聚关系的相关对象的集合，我们把聚合看作是一个修改数据的单元。</li>
</ul>
</li>
</ul>
<p>有分析报告显示，通常在大部分领域模型中，有70%的聚合通常只有一个实体，即聚合根，该实体内部没有包含其他实体，只包含一些值对象；另外30%的聚合中，基本上也只包含两到三个实体。这意味着大部分的聚合都只是一个实体，该实体同时也是聚合根。<br><strong>并不是所有的实体都是聚集根，但只有实体才能成为聚集根</strong></p>
<h3 id="工厂（factory）"><a href="#工厂（factory）" class="headerlink" title="工厂（factory）"></a>工厂（factory）</h3><p>工厂用来封装创建一个复杂对象尤其是聚合时所需的知识，作用是将创建对象的细节隐藏起来。客户传递给工厂一些简单的参数，然后工厂可以在内部创建出一个复杂的领域对象然后返回给客户。当创建 实体和值对象复杂时建议使用工厂模式。</p>
<h3 id="仓储（repositories）"><a href="#仓储（repositories）" class="headerlink" title="仓储（repositories）"></a>仓储（repositories）</h3><p>仓储是用来管理实体的集合。</p>
<h3 id="service"><a href="#service" class="headerlink" title="service"></a>service</h3><p>推荐：最好显式声明服务，因为它创建了领域中一个清晰的特性，封装了一个概念领域层服务和基础设施层服务：均建立在领域实体和值对象的上层，以便直接为这些相关的对象提供所需的服务；</p>
<h4 id="领域服务和domain对象的区别"><a href="#领域服务和domain对象的区别" class="headerlink" title="领域服务和domain对象的区别"></a>领域服务和domain对象的区别</h4><p>领域对象都是有状态和行为的，而领域服务没有状态只有行为。需要强调的是领域服务是无状态的，它存在的意义就是协调领域对象共同完成某个操作，所有的状态还是都保存在相应的领域对象中</p>
<h2 id="领域驱动架构"><a href="#领域驱动架构" class="headerlink" title="领域驱动架构"></a>领域驱动架构</h2><h3 id="层结构"><a href="#层结构" class="headerlink" title="层结构"></a>层结构</h3><h4 id="user-interface"><a href="#user-interface" class="headerlink" title="user interface"></a>user interface</h4><p>展现曾用于向用户展现信息，并且会解析用户行为</p>
<h4 id="Application-layer"><a href="#Application-layer" class="headerlink" title="Application layer"></a>Application layer</h4><p>应用层没有任何的业务逻辑代码，它很简单，它主要为程序提供任务处理。比如service（领域服务层）</p>
<h4 id="Domain-Layer"><a href="#Domain-Layer" class="headerlink" title="Domain Layer"></a>Domain Layer</h4><p>这一层包含有关领域的信息，是业务的核心，领域模型的状态都直接或间接（持久化至数据库）存储在这一层。</p>
<h4 id="Infrastructure-Layer"><a href="#Infrastructure-Layer" class="headerlink" title="Infrastructure Layer"></a>Infrastructure Layer</h4><p>为其他层提供底层依赖操作。<br><a href="https://blog.csdn.net/admans/article/details/97828436" target="_blank" rel="noopener">refer</a></p>
<h2 id="领域驱动设计"><a href="#领域驱动设计" class="headerlink" title="领域驱动设计"></a>领域驱动设计</h2><p>提出领域的角色是需求方</p>
<p>每个需求都会对应到某个领域</p>
<p>例如 商品搜索 对应 商品中心域<br>    用户登陆 对应 用户信息&amp;&amp;鉴权域</p>
<p>从产品–后端–前端对应的领域相同</p>
<h3 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h3><ol>
<li>视图尽可能薄</li>
<li>不写重复逻辑</li>
<li>不同职责的代码进行分层 </li>
<li>前端字段不受后端字段影响</li>
<li>可纵观全局领域</li>
</ol>
<p><img src="/images/ddd/ddd.png" alt="旧生命周期"></p>
<h2 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">├── common</span><br><span class="line">│   ├── components // 公用组件</span><br><span class="line">│   ├── constants // 全局变量</span><br><span class="line">│   │   ├── goods</span><br><span class="line">│   │   │   └── index.js</span><br><span class="line">│   │   ├── ...</span><br><span class="line">│   ├── data-source // 数据接口层</span><br><span class="line">│   │   ├── goods</span><br><span class="line">│   │   │   ├── requestApis.js</span><br><span class="line">│   │   │   └── translators.js</span><br><span class="line">│   │   ├── ...</span><br><span class="line">│   ├── domains // 领域层</span><br><span class="line">│   │   ├── goods-domain</span><br><span class="line">│   │   │   ├── entities // 实体</span><br><span class="line">│   │   │   │   └── goods.js</span><br><span class="line">│   │   │   └── goodsService.js // 领域Service服务</span><br><span class="line">│   │   ├── ...</span><br><span class="line">│   └── util // 公用函数</span><br><span class="line">│       └── http.js</span><br><span class="line">└── page // 页面视图层</span><br><span class="line">    ├── index</span><br><span class="line">    │   ├── App.js</span><br><span class="line">    │   ├── components</span><br><span class="line">    │   │   ├── GoodsItem.js</span><br><span class="line">    │   │   ├── GoodsItem.scss</span><br><span class="line">    │   │   ├── Nav.js</span><br><span class="line">    │   │   └── Nav.scss</span><br><span class="line">    │   ├── index.js</span><br><span class="line">    │   └── services // 该页面需要用到的Service</span><br><span class="line">    │       └── index.js</span><br><span class="line">    ├── ...</span><br></pre></td></tr></table></figure>
<p>数据层：进行数据的请求和处理，将字段名规范化或者做处理<br>领域层：</p>
<ul>
<li>实体：领域服务的载体，定义业务中某个个体的属性和方法。例如商品和购物车都可以抽象为实体，全局领域中是唯一的，不能出现在其他领域中。</li>
</ul>
<p><a href="https://github.com/Vincedream/ddd-fe-demo" target="_blank" rel="noopener">领域驱动设计在前端中的应用</a><br><a href="https://blog.csdn.net/qq773837256/article/details/52023905?depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1&amp;utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1" target="_blank" rel="noopener">refer</a></p>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="m-pagination col-md-8 col-md-offset-2 col-sm-24" role="pagination">
    
    <a class="pull-left" href="/2019/10/15/saga模式/" style="float: left;">
        ← saga模式
    </a>
    
    
    <a class="pull-right" href="/2019/09/18/docker基础/">
        docker基础 →
    </a>
    
</nav>

        <div class="col-md-8 col-md-offset-2 col-sm-24"><script type="text/javascript">
  /**
   * 搜狐畅言
   */

  /*
  document.write('<div id="SOHUCS" sid="' + window.location.pathname.slice(1) + '" ></div>');

  window.onload = function () {
    (function () {
      var appid = 'cytXXXX';
      var conf = 'prod_xxxxxxxxxxxxxxxxx';
      var width = window.innerWidth || document.documentElement.clientWidth;
      var loadJs = function (d, a, id) {
        var c = document.getElementsByTagName("head")[0] || document.head || document.documentElement;
        var b = document.createElement("script");
        b.setAttribute("type", "text/javascript");
        b.setAttribute("charset", "UTF-8");
        b.setAttribute("src", d);
        if (id) {
          b.setAttribute("id", id);
        }
        if (typeof a === "function") {
          if (window.attachEvent) {
            b.onreadystatechange = function () {
              var e = b.readyState;
              if (e === "loaded" || e === "complete") {
                b.onreadystatechange = null;
                a()
              }
            }
          } else {
            b.onload = a
          }
        }
        c.appendChild(b)
      };

      loadJs("https://changyan.sohu.com/upload/changyan.js", function () {
        window.changyan.api.config({
          appid: appid,
          conf: conf
        })
      });
    })();
  }
  */

</script>
</div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
                <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By LEISHAWN. All Rights Reserved.
                </p>
<!--                <p>Theme By <a href="//go.kieran.top" style="color: #767D84">Kieran</a></p>-->
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };

    resizeHero();

    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$('#intro').find('img').each(function(){
  var alt = this.alt;

  if (alt){
    $(this).after('<span class="caption" style="display:none">' + alt + '</span>');
  }

  $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="gallery" />');
});
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



      
</body>
</html>
